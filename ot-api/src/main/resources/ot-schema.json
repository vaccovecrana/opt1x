{
  "changes": [
    {
      "id": "tbl_OtGroup",
      "hash": "7618fbee",
      "author": "system",
      "sql": "CREATE TABLE IF NOT EXISTS OtGroup (\n  gid integer NOT NULL PRIMARY KEY,\n  pGid integer,\n  name varchar(256) NOT NULL,\n  path varchar(256) NOT NULL,\n  createUtcMs bigint,\n  CONSTRAINT fk_OtGroup_f6815484 FOREIGN KEY (pGid) REFERENCES OtGroup(gid),\n  CONSTRAINT unq_OtGroup_c4530819 UNIQUE (path)\n)"
    },
    {
      "id": "tbl_OtNamespace",
      "hash": "61161024",
      "author": "system",
      "sql": "CREATE TABLE IF NOT EXISTS OtNamespace (\n  nsId integer NOT NULL PRIMARY KEY,\n  pNsId integer,\n  name varchar(256) NOT NULL,\n  path varchar(256) NOT NULL,\n  createUtcMs bigint,\n  CONSTRAINT fk_OtNamespace_3d5e7926 FOREIGN KEY (pNsId) REFERENCES OtNamespace(nsId),\n  CONSTRAINT unq_OtNamespace_c4530819 UNIQUE (path)\n)"
    },
    {
      "id": "tbl_OtValue",
      "hash": "6bf80d87",
      "author": "system",
      "sql": "CREATE TABLE IF NOT EXISTS OtValue (\n  vid integer NOT NULL PRIMARY KEY,\n  nsId integer NOT NULL,\n  name varchar(128) NOT NULL,\n  value varchar(4096) NOT NULL,\n  type varchar(64) NOT NULL,\n  notes varchar(4096),\n  encrypted boolean,\n  createUtcMs bigint,\n  CONSTRAINT fk_OtValue_2b22fe72 FOREIGN KEY (nsId) REFERENCES OtNamespace(nsId),\n  CONSTRAINT unq_OtValue_aa85f514 UNIQUE (nsId, name)\n)"
    },
    {
      "id": "tbl_OtConfig",
      "hash": "4cc21d7a",
      "author": "system",
      "sql": "CREATE TABLE IF NOT EXISTS OtConfig (\n  cid integer NOT NULL PRIMARY KEY,\n  nsId integer NOT NULL,\n  name varchar(256) NOT NULL,\n  createUtcMs bigint,\n  CONSTRAINT fk_OtConfig_7d43e5d4 FOREIGN KEY (nsId) REFERENCES OtNamespace(nsId),\n  CONSTRAINT unq_OtConfig_aa85f514 UNIQUE (nsId, name)\n)"
    },
    {
      "id": "tbl_OtNode",
      "hash": "f0eb51f1",
      "author": "system",
      "sql": "CREATE TABLE IF NOT EXISTS OtNode (\n  nid integer NOT NULL PRIMARY KEY,\n  cid integer NOT NULL,\n  label varchar(128) NOT NULL,\n  type varchar(64) NOT NULL,\n  vid integer,\n  pNid integer,\n  itemIdx integer,\n  CONSTRAINT fk_OtNode_4ae3c71e FOREIGN KEY (cid) REFERENCES OtConfig(cid),\n  CONSTRAINT fk_OtNode_1fac18cb FOREIGN KEY (vid) REFERENCES OtValue(vid),\n  CONSTRAINT fk_OtNode_62f3215d FOREIGN KEY (pNid) REFERENCES OtNode(nid),\n  CONSTRAINT unq_OtNode_32aebac8 UNIQUE (cid, label, itemIdx)\n)"
    },
    {
      "id": "tbl_OtApiKey",
      "hash": "bacc5576",
      "author": "system",
      "sql": "CREATE TABLE IF NOT EXISTS OtApiKey (\n  kid integer NOT NULL PRIMARY KEY,\n  pKid integer,\n  name varchar(64) NOT NULL,\n  path varchar(2048) NOT NULL,\n  hash varchar(64) NOT NULL,\n  leaf boolean,\n  createUtcMs bigint,\n  accessUtcMs bigint,\n  metadata0 varchar(2048),\n  metadata1 varchar(2048),\n  metadata2 varchar(2048),\n  metadata3 varchar(2048),\n  oidcSub varchar(512),\n  oidcEmail varchar(512),\n  CONSTRAINT fk_OtApiKey_f23de6bc FOREIGN KEY (pKid) REFERENCES OtApiKey(kid),\n  CONSTRAINT unq_OtApiKey_e671bd2d UNIQUE (name),\n  CONSTRAINT unq_OtApiKey_c4530819 UNIQUE (path)\n);\nCREATE INDEX IF NOT EXISTS idx_OtApiKey_1f78be6e ON OtApiKey (oidcSub);\nCREATE INDEX IF NOT EXISTS idx_OtApiKey_be3390ca ON OtApiKey (oidcEmail);"
    },
    {
      "id": "tbl_OtKeyGroup",
      "hash": "a850badc",
      "author": "system",
      "sql": "CREATE TABLE IF NOT EXISTS OtKeyGroup (\n  id integer NOT NULL PRIMARY KEY,\n  kid integer NOT NULL,\n  gid integer NOT NULL,\n  role varchar(64),\n  grantKid integer NOT NULL,\n  grantUtcMs bigint,\n  CONSTRAINT fk_OtKeyGroup_e636ce13 FOREIGN KEY (kid) REFERENCES OtApiKey(kid),\n  CONSTRAINT fk_OtKeyGroup_1712ea1d FOREIGN KEY (gid) REFERENCES OtGroup(gid),\n  CONSTRAINT fk_OtKeyGroup_4d036ea5 FOREIGN KEY (grantKid) REFERENCES OtApiKey(kid),\n  CONSTRAINT unq_OtKeyGroup_47dec3f7 UNIQUE (kid, gid)\n)"
    },
    {
      "id": "tbl_OtGroupNs",
      "hash": "4613d2d",
      "author": "system",
      "sql": "CREATE TABLE IF NOT EXISTS OtGroupNs (\n  id integer NOT NULL PRIMARY KEY,\n  gid integer NOT NULL,\n  nsId integer NOT NULL,\n  grantKid integer NOT NULL,\n  grantUtcMs bigint,\n  read boolean,\n  write boolean,\n  manage boolean,\n  CONSTRAINT fk_OtGroupNs_f969b856 FOREIGN KEY (gid) REFERENCES OtGroup(gid),\n  CONSTRAINT fk_OtGroupNs_45e96e70 FOREIGN KEY (nsId) REFERENCES OtNamespace(nsId),\n  CONSTRAINT fk_OtGroupNs_e5c18063 FOREIGN KEY (grantKid) REFERENCES OtApiKey(kid),\n  CONSTRAINT unq_OtGroupNs_de559a4f UNIQUE (gid, nsId)\n)"
    }
  ]
}